cmake_minimum_required(VERSION 3.15)
project(boost_raylib_client LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)

# --- Compilers (for MinGW on Windows) ---
set(CMAKE_C_COMPILER "gcc")
set(CMAKE_CXX_COMPILER "g++")

# --- Output exe to project root ---
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR})

# --- Boost setup ---
set(BOOST_ROOT "C:/msys64/mingw64")
find_package(Boost REQUIRED COMPONENTS system)

# --- Raylib setup ---
set(RAYLIB_PATH "C:/raylib/raylib")
set(RAYLIB_INCLUDE_DIR "${RAYLIB_PATH}/src")
set(RAYLIB_LIB_DIR "${RAYLIB_PATH}/src")

# --- Collect all source files from src/ ---
file(GLOB_RECURSE SOURCES CONFIGURE_DEPENDS
    ${CMAKE_SOURCE_DIR}/src/*.cpp
)

# --- Create single WIN32 executable (no console window) ---
add_executable(MyGame WIN32 ${SOURCES})

# --- Include directories ---
target_include_directories(MyGame PRIVATE
    ${Boost_INCLUDE_DIRS}
    ${RAYLIB_INCLUDE_DIR}
)

# --- Link libraries ---
target_link_directories(MyGame PRIVATE ${RAYLIB_LIB_DIR})
target_link_libraries(MyGame PRIVATE
    ${Boost_LIBRARIES}
    ws2_32
    pthread
    raylib
    opengl32
    gdi32
    winmm
)

# --- Output name ---
set_target_properties(MyGame PROPERTIES
    OUTPUT_NAME "MyGame"
    RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}
)
